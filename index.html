<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Chain reAction | Stick to a habit</title>
  <link href="https://fonts.googleapis.com/css?family=Rubik::400,500,500i,900" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link />
</head>
<body>
  <header>
    <div>Logo</div>
    <h1>Chain reAction</h1>
    <h2>Repeat the Action to Stick to a Habit | See the Reaction</h2>
    <nav class="date-navigator">
      <button class="prev-date" alt="previous"><</button>
      <button class="current-date" alt="current"></button>
      <button class="next-date" alt="next">></button>
    </nav>
    <ul class="actions"></ul>
  </header>
  <script src="js/moment.js"></script>
  <script src="js/scripts.js"></script>
  <script>

    //------------- DATE -------------
    let now = moment();
    const today = now.format("YYYY-M-D");
    const dateNav = document.querySelector('.date-navigator');
    const prevDateBtn =  dateNav.querySelector('.prev-date');
    const currentDateBtn = dateNav.querySelector('.current-date');
    const nextDateBtn =  dateNav.querySelector('.next-date');


    //------------- ACTIONS -------------
    let entries = {}
    const actions = document.querySelector('.actions');
    let actionsList = [ {
          "name": "code",
          "color": "pink",
          "value": "hex",
          "done": false,
        }, {
          "name" : "sew",
          "color": "gray",
          "value": "hex",
          "done": true,
        }, {
          "name": "eat",
          "color": "orange",
          "value": "hex",
          "done": true,
        }, {
          "name": "draw",
          "color": "yellow",
          "value": "hex",
          "done": false,
        },
      ]

    //------------- STORE DATE -------------
    function checkForActions( date) {
      if (entries.hasOwnProperty(date)) {
        console.table('today', date, 'is already logged, just display it')
        console.table(entries)
      } else {
        console.table('today', date, 'isnt logged, so log it!!!');
        entries[date] = ['actions go here'];
        console.table(entries)
      }
    }

    //------------- DISPLAY DATE -------------
    function displayDate(date = now) {
      currentDateBtn.innerHTML = `
          <div>${date.format('dddd')}</div>
          <div>${date.format('MMMM Do, YYYY')}</div>
      `
      displayActions();
    }

    function goBack() {
      let back = now.subtract(1, 'day')
      displayDate(back);
      displayDatedActions(back.format("YYYY-M-D"));
      checkForActions(back.format("YYYY-M-D"));
    }

    function goForward() {
      if (moment().isSame( now, 'd' )) return
      let forward = now.add(1, 'day');
      displayDate(forward);
      displayDatedActions(forward.format("YYYY-M-D"));
      checkForActions(forward.format("YYYY-M-D"));
    }

    function goToToday() {
      if (moment().isSame( now, 'd' )) return
      now = moment();
      displayDate(now);
      displayDatedActions(now);
      checkForActions(now.format("YYYY-M-D"));
    }

    prevDateBtn.addEventListener('click', goBack);
    nextDateBtn.addEventListener('click', goForward);
    currentDateBtn.addEventListener('click', goToToday)

    displayDate(now);

    //------------- CREATE ACTION -------------

    //------------- DISPLAY ACTIONS -------------
    function displayActions( items = actionsList ) {
      actions.innerHTML = items.map((item, i) => {
        document.documentElement.style.setProperty(`--action${i}`, item.color);
        return `
            <li class="action" style="color:var(--action${i}); border: 1px solid var(--action${i});">
              <input type="checkbox" id="action${i}" ${item.done ? 'checked' : ''}/>
              <label for="action${i}">${item.name}</label>
            </li>
        `
      }).join("")
    }
    displayActions()



    //------------- DISPLAY ACTIONS FOR SPECIFIC DATE -------------

    function displayDatedActions( date ) {
      console.log('log actions for this date:', date);
    }


  </script>
</body>
</html>
